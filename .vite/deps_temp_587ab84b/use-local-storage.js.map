{
  "version": 3,
  "sources": ["../../node_modules/use-local-storage/dist/index.js"],
  "sourcesContent": ["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nfunction useLocalStorage(key, defaultValue, options) {\n    var opts = (0, react_1.useMemo)(function () {\n        return __assign({ serializer: JSON.stringify, parser: JSON.parse, logger: console.log, syncData: true }, options);\n    }, [options]);\n    var serializer = opts.serializer, parser = opts.parser, logger = opts.logger, syncData = opts.syncData;\n    var rawValueRef = (0, react_1.useRef)(null);\n    var _a = (0, react_1.useState)(function () {\n        if (typeof window === \"undefined\")\n            return defaultValue;\n        try {\n            rawValueRef.current = window.localStorage.getItem(key);\n            var res = rawValueRef.current\n                ? parser(rawValueRef.current)\n                : defaultValue;\n            return res;\n        }\n        catch (e) {\n            logger(e);\n            return defaultValue;\n        }\n    }), value = _a[0], setValue = _a[1];\n    (0, react_1.useEffect)(function () {\n        if (typeof window === \"undefined\")\n            return;\n        var updateLocalStorage = function () {\n            // Browser ONLY dispatch storage events to other tabs, NOT current tab.\n            // We need to manually dispatch storage event for current tab\n            if (value !== undefined) {\n                var newValue = serializer(value);\n                var oldValue = rawValueRef.current;\n                rawValueRef.current = newValue;\n                window.localStorage.setItem(key, newValue);\n                window.dispatchEvent(new StorageEvent(\"storage\", {\n                    storageArea: window.localStorage,\n                    url: window.location.href,\n                    key: key,\n                    newValue: newValue,\n                    oldValue: oldValue,\n                }));\n            }\n            else {\n                window.localStorage.removeItem(key);\n                window.dispatchEvent(new StorageEvent(\"storage\", {\n                    storageArea: window.localStorage,\n                    url: window.location.href,\n                    key: key,\n                }));\n            }\n        };\n        try {\n            updateLocalStorage();\n        }\n        catch (e) {\n            logger(e);\n        }\n    }, [value]);\n    (0, react_1.useEffect)(function () {\n        if (!syncData)\n            return;\n        var handleStorageChange = function (e) {\n            if (e.key !== key || e.storageArea !== window.localStorage)\n                return;\n            try {\n                if (e.newValue !== rawValueRef.current) {\n                    rawValueRef.current = e.newValue;\n                    setValue(e.newValue ? parser(e.newValue) : undefined);\n                }\n            }\n            catch (e) {\n                logger(e);\n            }\n        };\n        if (typeof window === \"undefined\")\n            return;\n        window.addEventListener(\"storage\", handleStorageChange);\n        return function () { return window.removeEventListener(\"storage\", handleStorageChange); };\n    }, [key, syncData]);\n    return [value, setValue];\n}\nexports.default = useLocalStorage;\n"],
  "mappings": "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",
  "names": ["e"]
}
